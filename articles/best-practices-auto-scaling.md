<properties
   pageTitle="Autoskalering vejledning | Microsoft Azure"
   description="Vejledning i at Autoskalering dynamisk allokere ressourcer, der kræves af et program."
   services=""
   documentationCenter="na"
   authors="dragon119"
   manager="christb"
   editor=""
   tags=""/>

<tags
   ms.service="best-practice"
   ms.devlang="na"
   ms.topic="article"
   ms.tgt_pltfrm="na"
   ms.workload="na"
   ms.date="07/13/2016"
   ms.author="masashin"/>

# <a name="autoscaling-guidance"></a>Autoskalering vejledning

[AZURE.INCLUDE [pnp-header](../includes/guidance-pnp-header-include.md)]

## <a name="overview"></a>Oversigt
Autoskalering består af dynamisk at tildele de ressourcer, der kræves, før et program tilladelse til at matche krav til ydeevne og opfylder serviceniveauaftaler (SLA) minimerer runtime omkostningerne. Efterhånden som mængde arbejde vokser, kan et program kræver yderligere ressourcer til at aktivere den skal udføre sine opgaver i tide. Som demand slackens, kan det være deaktivere tildelte at minimere omkostninger, og stadig bevare tilstrækkelig ydeevne og møde SLA ressourcer.
Autoskalering udnytter Elasticitet i skyen-hostet miljøer mens lette administration. Sker det ved at reducere behovet for en operator til kontinuerligt at overvåge ydeevnen for et system og træffe beslutninger om at tilføje eller fjerne ressourcer.
>[AZURE.NOTE] Autoskalering gælder for alle de ressourcer, der bruges af et program, ikke kun Beregn ressourcerne. Dit system bruger meddelelseskøer til at sende og modtage oplysninger, kan det oprette i flere køer, mens det skaleres.

## <a name="types-of-scaling"></a>Typer af skalering
Skalering typisk har en af følgende to måder:

- **Lodret** (ofte kaldet _Skalering op og ned_). Denne formular kræver, at du ændrer hardwaren (udvide eller reducere dens kapacitet og ydeevne), eller installere løsningen ved hjælp af alternativ hardware, der indeholder de relevante kapacitet og ydeevne. Hardwareplatformen er typisk et virtuelt miljø i et skybaseret miljø. Medmindre det oprindelige hardware blev væsentligt overprovisioned, med de deraf følgende ide kapital udgifter, omhandler lodret skalering i dette miljø klargøring mere effektiv ressourcer, og derefter flytte system til disse nye ressourcer. Lodret skalering er ofte et forstyrrende proces, der kræver gør systemet ikke tilgængelig i øjeblikket, mens det er der genaktiveres. Det kan være muligt at holde det oprindelige system kører, mens den nye hardware er klargjort og hentet ind online, men der er sandsynligvis nogle blev afbrudt under behandling overgange fra det gamle miljø til et nyt. Det er usædvanlige bruge Autoskalering til at implementere en strategi for lodret skalering.
- **Vandret** (ofte kaldet _Skalering ind og ud_). Denne formular kræver installation af løsningen på flere eller færre ressourcer, som typisk er vare ressourcer i stedet for proevningsmetoden systemer. Løsningen kan fortsætte med kører uden afbrydelser, mens disse ressourcer er klargjort. Når processen klargøring er fuldført, kan kopier af de elementer, der udgør løsningen installeres på disse yderligere ressourcer og gjort tilgængelige. Hvis demand falder, kan de yderligere ressourcer frigjort, når de elementer, der er brugt dem er blevet lukket korrekt. Mange skybaseret systemer, herunder Microsoft Azure understøtter automatisering af denne form for skalering.

## <a name="implement-an-autoscaling-strategy"></a>Implementere en strategi for Autoskalering
Implementere en strategi for Autoskalering typisk omfatter følgende komponenter og processer:

- Instrumentation og overvåge systemer på de program, tjeneste og infrastruktur niveauer. Disse systemer registrere vigtige mål, som svar gange, kø længde, CPU-forbrug og hukommelsesforbrug.
- Beslutningstagning logik, der kan evalueres overvåget skalering faktorer mod foruddefinerede system tærskler eller tidsplaner og træffe beslutninger angiver, om at skalere eller ej.
- Komponenter, der er ansvarlig for at udføre opgaver, der er knyttet til skalering systemet, som klargøringen eller deaktivere klargøring af ressourcer.
- Test, overvågning og justering af Autoskalering strategi for at sikre, at den fungerer som forventet.

De fleste skybaserede miljøer, såsom Azure, har indbyggede Autoskalering mekanismer denne adresse almindelige scenarier. Hvis det miljø eller den tjeneste, du bruger indeholder ikke nødvendige automatisk skalering funktionalitet, eller hvis du har yderste Autoskalering krav ud over dens egenskaber, kan det være nødvendigt en brugerdefineret installation. Brug denne tilpasset implementering til at indsamle funktionsdygtige og system målepunkter, analysere dem for at identificere relevante data og skalere ressourcer i overensstemmelse hermed.


## <a name="configure-autoscaling-for-an-azure-solution"></a>Konfigurere Autoskalering for en Azure-løsning
Der er flere muligheder for at konfigurere Autoskalering for dine Azure løsninger:

- **Azure Autoskalering** understøtter de mest almindelige skalering scenarier baseret på en tidsplan, og som du kan også udløses skalering handlinger, der er baseret på kørselstidspunktet målepunkter (som processorudnyttelse, længde kø eller indbyggede og brugerdefinerede tællere). Du kan konfigurere enkle Autoskalering politikker for en løsning hurtigt og nemt ved hjælp af portalen Azure. Finde mere detaljerede kontrolelement, du kan gøre brug af [Azure Service Management REST-API](https://msdn.microsoft.com/library/azure/ee460799.aspx) eller [Azure ressourcestyring REST-API](https://msdn.microsoft.com//library/azure/dn790568.aspx). [Azure overvågning Service Management bibliotek](http://www.nuget.org/packages/Microsoft.WindowsAzure.Management.Monitoring) og [Microsoft indsigt Library](https://www.nuget.org/packages/Microsoft.Azure.Insights/) (i eksemplet) er SDK'er, der tillader indsamling målepunkter fra forskellige ressourcer, og Udfør Autoskalering ved at gøre brug af REST API'er. For de ressourcer, kan hvor Azure ressourcestyring support er ikke tilgængelig, eller hvis du bruger Azure Cloud Services Service Management REST-API bruges til Autoskalering. I alle andre tilfælde skal du bruge Azure ressourcestyring.
- **En brugerdefineret løsning**, baseret på dine instrumentation på programmer og funktioner til administration af Azure, kan være praktiske. Du kan for eksempel bruge Azure diagnosticering eller andre metoder til instrumentation i dit program, sammen med brugerdefineret kode til kontinuerligt at overvåge og eksportere målepunkter af programmet. Du kan have brugerdefinerede regler, der arbejder på denne statistik, og gør brug af Service Management eller Ressourcestyring REST-API en udløses Autoskalering. Målene for udløsning handlingen skalering kan være en hvilken som helst indbyggede eller brugerdefinerede tæller eller andre instrumentation du implementerer i programmet. En brugerdefineret løsning er dog ikke nemt at implementere, og skal overvejes kun hvis ingen af de forrige metoder kan opfylde dine behov. [Autoskalering programmet Bloker](http://msdn.microsoft.com/library/hh680892%28v=pandp.50%29.aspx) gør brug af denne metode.
- **Tredjepartstjenester**som [Paraleap AzureWatch](http://www.paraleap.com/AzureWatch), gør det muligt at tilpasse en løsning, der er baseret på tidsplaner, service Indlæs og system indikatorer, brugerdefinerede regler og kombinationer af forskellige typer regler.

Når du vælger hvilke Autoskalering løsning at bruge, kan du overveje følgende punkter:

- Brug de indbyggede Autoskalering funktioner i platformen, hvis de kan opfylder dine behov. Hvis ikke, nøje overveje, om du virkelig har brug for mere komplekse skalering funktioner. Nogle eksempler på ekstra krav kan være flere granularitet af kontrolelementet, forskellige måder til at registrere udløser hændelser for skalering, skalering på tværs af abonnementer og skalering andre typer af ressourcer.
- Overvej, hvis du kan forudsige belastning på programmet med tilstrækkelig nøjagtighed til kun afhænger planlagt Autoskalering (tilføje og fjerne forekomster at opfylde forventede maksimale efterspørgsel). Hvor det er ikke muligt, Brug aktiv Autoskalering baseret på målepunkter, der indsamles på kørselstidspunktet, hvis du vil tillade programmet til at håndtere uventede ændringer i efter behov. Du kan typisk kombinere disse fremgangsmåder. Oprette en strategi, der tilføjer ressourcer som Beregn, lager og køer, baseret på en plan over de tidspunkter, når du kender programmet er mest optaget. Dette hjælper med at sikre, at kapacitet er tilgængelige, når det er påkrævet, straks stødt på, når du starter nye forekomster. Definere desuden målepunkter, der tillader aktiv Autoskalering i denne periode at sikre, at programmet kan håndtere vedvarende men uventede maksimale efterspørgsel for hver planlagt regel.
- Det er ofte svært at forstå relationen mellem målepunkter og kapacitet krav, især hvis et program installeres først. Foretrække at klargøre lidt ekstra kapacitet i starten, og derefter overvåge og finjustere Autoskalering reglerne for at flytte kapaciteten tættere til den aktuelle belastning.

### <a name="use-azure-autoscale"></a>Bruge Azure Autoskalering
Autoskalering gør det muligt at konfigurere Skaler ud og skalere i indstillinger for en løsning. Autoskalering kan automatisk tilføje og fjerne forekomster af Azure Cloud Services web og arbejder roller, Azure Mobile-tjenester og Web Apps-funktion i Azure App Service. Det kan også aktivere automatisk skalering ved at starte og stoppe forekomster af virtuelle Azure-computere. En strategi for Azure Autoskalering indeholder to sæt af faktorer:

- Tidsplan-baserede Autoskalering, der kan sikre, at andre forekomster er tilgængelige til at stemme overens med en forventede top i brugen og kan skalere i, når den maksimale tid er passeret. Dette giver dig mulighed at sikre, at du har tilstrækkelige forekomster allerede kører, uden at vente i systemet til at reagere på afkrydsningsfeltet Indlæs.
- Målepunkter-baserede Autoskalering, reagerer på faktorer som gennemsnitlige CPU-forbrug med den seneste time eller ordrebeholdningen for meddelelser, der behandler løsningen i en Azure lagerplads eller Azure Service Bus kø. Dette betyder, at reagere separat fra de planlagte Autoskalering regler, der tages højde for ikke-planlagt eller uventede ændringer i efter behov.

Overvej følgende punkter, når du bruger Autoskalering:

- Din strategi for Autoskalering kombinerer både planlagte og målepunkter-baserede skalering. Du kan angive begge typer regler til en tjeneste.
- Du skal konfigurere Autoskalering regler, og derefter overvåge ydeevnen for dit program over tid. Brug af resultaterne af denne overvågning til at tilpasse den måde, hvor systemet skaleres, hvis det er nødvendigt. Vær dog huske, autoskalering ikke er en omgående proces. Det tager tid at reagere på en metrikværdi som middel CPU anvendelsen overstiger (eller falder under) en bestemt grænse.
- Autoskalering regler, der bruger en registrering ordning baseret på en målt udløser attribut (såsom CPU-forbrug eller kø længde) Brug en sammenlagt værdi over tid i stedet for omgående værdier til at udløse en Autoskalering handling. Som standard er et aggregat et gennemsnit af værdierne. Dette forhindrer systemet fra reagerer for hurtigt eller medfører hurtig svingning. Gør det også tidspunkt for nye forekomster, der automatisk-startes udlignes til at køre tilstand, forhindre yderligere Autoskalering handlinger i at opstå, mens de nye forekomster starter. Til Azure Cloud Services og virtuelle Azure-computere, er standardperioden om sammenlægning 45 minutter, så det kan tage til dette tidsrum for metrikværdi for at udløse Autoskalering som svar på spidser i efter behov. Du kan ændre sammenlægning perioden ved hjælp af SDK, men vær opmærksom på, kan medføre uventede resultater, perioder på færre end 25 minutter (se yderligere oplysninger finder [Automatisk skalering Cloud Services på CPU procent med Azure overvågning Services biblioteket administration](http://rickrainey.com/2013/12/15/auto-scaling-cloud-services-on-cpu-percentage-with-the-windows-azure-monitoring-services-management-library/)). For Web Apps er den formidlingstid meget kortere, så nye forekomster skal være tilgængelig i om fem minutter, efter en ændring af det gennemsnitlige udløser mål.
- Hvis du konfigurerer Autoskalering bruger SDK i stedet for på webportalen, kan du angive en mere detaljeret tidsplan, hvor reglerne, der er aktive. Du kan også oprette dine egne målepunkter og bruge dem med eller uden nogen af de eksisterende i Autoskalering regler. For eksempel kan du skal bruge alternative tællere, som antallet anmodninger per sekund eller tilgængelighed gennemsnitlige hukommelse eller brugerdefinerede tællere, der måler bestemte forretningsprocesser.
- Når Autoskalering virtuelle Azure-computere, skal du installere en antallet af forekomster af den virtuelle maskine, der svarer til det maksimale antal tillader du Autoskalering til at starte. Disse forekomster skal være en del af det samme sæt tilgængelighed. Den virtuelle maskiner Autoskalering ordning ikke oprette eller slette forekomster af den virtuelle maskine; i stedet vil du konfigurere Autoskalering reglerne start og stop et passende antal disse forekomster. Se [skalere et program, der kører Web roller, arbejder roller eller virtuelle maskiner automatisk](./cloud-services/cloud-services-how-to-scale.md)kan finde flere oplysninger.
- Hvis nye forekomster ikke kan startes, måske fordi er nået maksimalt til et abonnement, eller der opstår en fejl under start på portalen viser muligvis, at en Autoskalering handlingen er udført. Dog vises efterfølgende **ChangeDeploymentConfiguration** hændelser, der vises i portalen kun, der blev anmodet om en tjeneste Start, og der vil være ingen begivenhed til at angive den blev fuldført.
- Du kan bruge webportalen Brugergrænsefladen ressourcer som forekomster af SQL-Database og køer sammenkædes en forekomst af Beregn tjenesten. Dette giver dig nemmere adgang til separat manuelle og automatiske skaleringsindstillinger konfiguration for hver af de sammenkædede ressourcer. Kan finde flere oplysninger under [Sådan: sammenkæde en ressource til en skybaseret tjeneste](cloud-services-how-to-manage.md#linkresources) og [hvordan du kan skalere et program](./cloud-services/cloud-services-how-to-scale.md).
- Når du konfigurerer flere regler og politikker, kan de er i konflikt med hinanden. Autoskalering bruger følgende konflikt opløsning regler til at sikre, at der altid er et tilstrækkeligt antal forekomster, der kører:
  - Skaler ud handlinger altid tilsidesætter skala i handlinger.
  - Hvornår kan skalere handlinger konflikt, den regel, der starter den største stigning i antallet af forekomster for.
  - Når skalere i handlinger konflikt, den regel, der starter mindste faldet i antallet af forekomster for.

<a name="the-azure-monitoring-services-management-library"></a>

## <a name="application-design-considerations-for-implementing-autoscaling"></a>Programmet Designovervejelser implementere Autoskalering
Autoskalering er ikke en chat-løsning. Føje ressourcer til et system eller kører flere forekomster af en proces blot garanterer ikke, vil det forbedre systemets ydeevne. Overvej følgende punkter, når du designer en Autoskalering strategi for:

- Systemet skal være udviklet til at være vandret SVG. Undgå antagelser om forekomst forbindelse; ikke designe løsninger, der kræver, at koden altid er aktiv i en bestemt forekomst af en proces. Når vandret skalering en skybaseret tjeneste eller et websted, ikke forudsætter, at en række forespørgsler fra samme kilde altid sendes til den samme forekomst. Designe services til at være i en tilstand for at undgå at kræve en række forespørgsler fra et program skal altid dirigeres til den samme forekomst af en tjeneste til samme grund. Når du designer en tjeneste, der læser meddelelser fra en kø og behandler dem, foretag eventuelle antagelser om hvilke forekomst af tjenesten håndtagene en bestemt meddelelse. Autoskalering kunne starte flere forekomster af en tjeneste, som kø længden vokser. [Konkurrere forbrugere mønster](http://msdn.microsoft.com/library/dn568101.aspx) beskriver, hvordan til at håndtere dette scenario.
- Hvis løsningen implementerer en længerevarende opgave, designe denne opgave til at understøtte både skalering af og skalering i. Uden forfaldsdatoer omtanke, så en opgave kan forhindre en forekomst af en proces i lukkes korrekt, når systemet skaleres i eller den kan miste data, hvis processen afbrydes gennemtvinge. Ideelt set refactor en længerevarende opgave og opdele behandling, som den udfører i mindre, adskilte stykker. [Pipes og filtre mønster](http://msdn.microsoft.com/library/dn568100.aspx) indeholder et eksempel på, hvordan du kan opnå dette.
- Du kan også implementere en kontrolpunkt ordning, poster angive oplysninger om opgaven med jævne mellemrum, og Gem denne tilstand i robust lagerplads, der kan åbnes af en forekomst af den proces, der kører opgaven. På denne måde, hvis processen er lukket, kan det arbejde, det udfører genoptages fra det sidste kontrolpunkt ved hjælp af en anden forekomst.
- Når opgaver i baggrunden kører på separate Beregn forekomster, som i arbejder roller af en skytjenester hostet programmet på computeren, kan du vil skalere forskellige dele af programmet ved hjælp af forskellige skalering politikker. For eksempel du muligvis installere yderligere bruger brugergrænsefladen Beregn forekomster uden at øge antallet af baggrunden beregne forekomster eller modsat af dette. Hvis du tilbyder forskellige niveauer af service (såsom grundlæggende og imponerende servicepakker), kan du vil skalere Beregn ressourcer til premium-servicepakker mere aggressivt end rettighederne for grundlæggende servicepakker for at overholde SLA.
- Overvej at bruge længden af køen over, hvilke Brugergrænsefladen og baggrund beregne forekomster kommunikere som et kriterium for din strategi for Autoskalering. Dette er den bedste indikator for en ubalance eller forskellen mellem den aktuelle belastning og kapaciteten behandling af opgaven baggrund.
- Hvis du baserer din strategi for Autoskalering på tællere, der måler forretningsprocesser, som antallet af ordrer hver time eller den gennemsnitlige udførelse af tid for en kompleks transaktion, kan du sikre dig, at du forstår forholdet mellem resultaterne fra disse typer tællere og faktisk Beregn kapacitet kravene fuldt ud. Det kan være nødvendigt at skalere flere komponenter eller beregne enhed som svar på ændringer i business procestællere.  
- For at forhindre forsøg på at skalere ud stærkt og for at undgå de omkostninger, der er tilknyttet igangværende mange tusindvis af forekomster af et system, bør du overveje at begrænse det maksimale antal forekomster, der kan føjes automatisk. De fleste Autoskalering gør det muligt at angive det mindste og største antal forekomster for en regel. Desuden kan du overveje at problemfrit forværrer den funktionalitet, som indeholder systemet, hvis det maksimale antal forekomster er implementeret og systemet er stadig overbelastet.
- Holde pågældende Autoskalering muligvis ikke de mest relevante metode til at håndtere en pludselig burst i arbejdsbelastningen huske. Det tager tid at klargøre og starte nye forekomster af en tjeneste eller føje ressourcer til et system, og høj efterspørgsel muligvis er gået, når disse yderligere ressourcer der er gjort tilgængelige. I dette scenario, kan det være bedre Sådan begrænses tjenesten. Du kan finde yderligere oplysninger finder [(Throttling) mønster](http://msdn.microsoft.com/library/dn589798.aspx).
- Omvendt, hvis du har brug for kapacitet til at behandle alle mødeindkaldelser, når lydstyrken varierer hurtigt, og omkostninger ikke er en vigtig bidrager faktor, overveje at bruge en strategi for tilstanden Autoskalering, der starter flere forekomster hurtigere. Du kan også bruge en planlagt politik, der starter et tilstrækkeligt antal forekomster til at opfylde den største belastning, før Indlæs forventes.
- Autoskalering ordning skal overvåge Autoskalering processen, og log oplysningerne om hver enkelt hændelse Autoskalering (hvad udløste den, hvilke ressourcer, der er blevet tilføjet eller fjernet, og hvornår). Hvis du opretter en brugerdefineret Autoskalering ordning, kan du sikre dig, at den inkorporerer denne egenskab. Analysere oplysninger til at måle effektiviteten i forbindelse med Autoskalering strategi, og finjustere den, hvis det er nødvendigt. Du kan finjustere både i det korte ord, som brugsmønstre bliver mere tydelig og overskredet på lang sigt, efterhånden som virksomheden udvider eller krav programmet udvikler. Hvis et program, når den øvre grænse, der er defineret for Autoskalering, kan ordningen også giver besked om en operator der manuelt starte yderligere ressourcer, hvis det er nødvendigt. Bemærk, at under disse omstændigheder operatoren kan også være ansvarlig for at fjerne disse ressourcer manuelt, når arbejdsbelastningen Letter.

## <a name="related-patterns-and-guidance"></a>Relaterede mønstre og vejledning
Følgende mønstre og vejledning kan også være relevant for det pågældende scenarie når implementere Autoskalering:

- [(Throttling) mønster](http://msdn.microsoft.com/library/dn589798.aspx). Dette mønster beskrives, hvordan et program kan fortsætte med at fungere og opfylder SLA, når et større demand placerer en yderste belastning på ressourcer. (Throttling) kan bruges med Autoskalering for at undgå et system i at blive overvældet, mens systemet skaleres ud.
- [Konkurrere forbrugere mønster](http://msdn.microsoft.com/library/dn568101.aspx). Dette mønster beskriver, hvordan at implementere en samling af forekomster af tjenesten, der kan håndtere meddelelser fra alle forekomster af programmet. Autoskalering kan bruges til at starte og stoppe forekomster af tjenesten, så det svarer til den forventede arbejdsbelastning. Denne fremgangsmåde gør det muligt for et system til at behandle flere meddelelser samtidig at optimere overførselshastighed, forbedre skalerbarhed og tilgængelighed og fordele arbejdsbelastningen.
- [Instrumentation og Telemetri vejledning](http://msdn.microsoft.com/library/dn589775.aspx). Instrumentation og telemetri er afgørende for indsamling af de oplysninger, der kan nå Autoskalering processen.

## <a name="more-information"></a>Få mere at vide
- [Sådan skalere et program](./cloud-services/cloud-services-how-to-scale.md)
- [Skalere et program, der kører Web roller, arbejder roller eller virtuelle maskiner automatisk](cloud-services-how-to-manage.md#linkresources)
- [Sådan: sammenkæde en ressource til en skybaseret tjeneste](cloud-services-how-to-manage.md#linkresources)
- [Skalere sammenkædede ressourcer](./cloud-services/cloud-services-how-to-scale.md#scale-link-resources)
- [Azure overvågning Services Management bibliotek](http://www.nuget.org/packages/Microsoft.WindowsAzure.Management.Monitoring)
- [Azure Service Management REST-API](http://msdn.microsoft.com/library/azure/ee460799.aspx)
- [Azure ressourcestyring REST-API](https://msdn.microsoft.com/library/azure/dn790568.aspx)
- [Microsoft Insights bibliotek](https://www.nuget.org/packages/Microsoft.Azure.Insights/)
- [Handlinger på Autoskalering](http://msdn.microsoft.com/library/azure/dn510374.aspx)
- [Microsoft.WindowsAzure.Management.Monitoring.Autoscale Namespace](http://msdn.microsoft.com/library/azure/microsoft.windowsazure.management.monitoring.autoscale.aspx)

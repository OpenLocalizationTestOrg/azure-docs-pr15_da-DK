<properties
   pageTitle="Tilgængelighed tjekliste | Microsoft Azure"
   description="Tjekliste, der indeholder en vejledning til tilgængelighed under design."
   services=""
   documentationCenter="na"
   authors="dragon119"
   manager="masimms"
   editor=""
   tags=""/>

<tags
   ms.service="best-practice"
   ms.devlang="na"
   ms.topic="article"
   ms.tgt_pltfrm="na"
   ms.workload="na"
   ms.date="07/13/2016"
   ms.author="masashin"/>

# <a name="availability-checklist"></a>Tjekliste for tilgængelighed

[AZURE.INCLUDE [pnp-header](../includes/guidance-pnp-header-include.md)]

## <a name="application-design"></a>Programmet design

- **Undgå fejl ét afsnit.** Alle komponenter, tjenester, ressourcer og Beregn forekomster skal installeres som flere forekomster til at forhindre en ét afsnit i påvirker tilgængelighed. Dette omfatter godkendelsesmetoder. Designe program tilladelse til at kunne konfigureres til at bruge flere forekomster, og til automatisk at registrere fejl og omdirigeres anmodninger til ikke-mislykkedes forekomster, hvor platformen ikke gør dette automatisk.
- **Opdele arbejdsbelastningen per forskellige serviceniveauaftale.** Hvis en tjeneste består af kritiske og mindre kritiske arbejdsbelastninger, administrere dem anderledes, og Angiv service-funktioner og antallet af forekomster til opfylder kravene om deres tilgængelighed.
- **Minimere og forstå service afhængigheder.** Minimere antallet af forskellige tjenester, der bruges, hvor det er muligt, og sikre, at du forstår alle de funktion og tjenesten afhængigheder, der findes i systemet. Dette omfatter disse afhængigheder art og påvirkningen af manglende eller nedsat ydeevne i hvert af dem på det overordnede program. Microsoft garanterer mindst 99,9% tilgængelighed for de fleste tjenester, men dette betyder, at hver ekstra tjeneste et program er afhængig af potentielt reducerer overordnede tilgængeligheden SLA af systemet med 0,1 procent.
- **Designe opgaver og meddelelser skal være idempotent (sikkert gentaget), hvor det er muligt**, så, dubleret anmodninger medføre ikke problemer. For eksempel kan en tjeneste fungere som en forbruger, der håndterer meddelelser, der sendes as-anmodninger i andre dele af systemet, der fungerer som producenter. Hvis forbrugeren mislykkes efter behandling af meddelelsen, men før som bekræfter, at den er blevet behandlet, kan en producent sende en Gentag anmodning, kan løses ved en anden forekomst af forbrugerne. Derfor skal forbrugere og de handlinger, de udfører være idempotent så gentaget en tidligere udført handlingen ikke gengives resultaterne ugyldige. Det kan betyde registrering af dubleret meddelelser eller sikring af konsistens ved hjælp af en optimistisk metode til håndtering af konflikter.
- **Brug en meddelelse mægler, der implementerer høj tilgængelighed til vigtige transaktioner.** Mange scenarier for start af opgaver eller få adgang til remote services bruger messaging for at overføre instruktioner mellem programmet og mål-tjenesten. Bedste ydeevne, skal programmet kunne sende meddelelsen og derefter returnere for at behandle flere forespørgsler, uden at skulle vente på et svar. For at garantere leveringen af meddelelser, kan meddelelsessystemet give høj tilgængelighed. Azure Service Bus meddelelseskøer implementere _mindst én gang_ semantik. Det betyder, at alle de meddelelser, der er sendt til en kø går ikke tabt, selvom flere kopier kan blive leveret under visse omstændigheder. Hvis meddelelsen behandles idempotent (se det forrige element), gentages levering ikke må være et problem.
- **Design-programmer til at problemfrit forringe** ved at kontakte ressource begrænsninger, og tag relevante handling for at minimere påvirkningen til brugeren. I nogle tilfælde belastning på programmet kan overskride kapaciteten af en eller flere dele, forårsager reduceret tilgængelighed og mislykkedes forbindelser. Skalering kan hjælpe med at afhjælpe dette, men den kan nå en er grænsen andre faktorer, som ressourcetilgængelighed eller omkostninger. Designe programmet, så der i så fald den kan automatisk forringe problemfrit. For eksempel i et ecommerce system, hvis rækkefølge behandling undersystem er under belastning (eller mislykkes endda helt), kan midlertidigt deaktiveres samtidig med andre funktioner (såsom Gennemse et produktkatalog) til at fortsætte. Det kan være relevant at udsætte anmodninger om til et fejlbehæftede undersystem, for eksempel stadig aktivere kunder til at sende ordrer, men gemme dem til senere behandling, når ordrer undersystem er tilgængelig igen.
- **Problemfrit at håndtere hurtig burst begivenheder.** De fleste programmer skal håndtere forskellige arbejdsbelastninger over tid, som spidser først første i morgen i et forretningsprogram, eller når et nyt produkt er udgivet i et websted for elektronisk handel. Automatisk skalering kan hjælpe med at håndtere afkrydsningsfeltet Indlæs, men det kan tage noget tid for flere forekomster er online og håndtere anmodninger. Forhindre, at pludselig og uventede indstilling aktivitet sikkerhedsmæssige programmet: designe det til de tjenester, der bruges kø anmodninger og forringe problemfrit, når køer ligger meget tæt på fuld kapacitet. Sørg for, at der er tilstrækkelig ydeevne og kapacitet tilgængelig under ikke-burst betingelser til at løbe køerne og håndtere udestående anmodninger. Du kan finde yderligere oplysninger finder [kø-baserede Indlæs udjævning mønster](https://msdn.microsoft.com/library/dn589783.aspx).

## <a name="deployment-and-maintenance"></a>Installation og vedligeholdelse

- **Installere flere forekomster af roller for hver tjeneste.** Microsoft gør tilgængelighed garantier til tjenester, du opretter og installerer, men disse garantier gælder kun, hvis du installerer mindst to forekomster af hver rolle i tjenesten. Dette gør det muligt for en administratorrolle, der skal være tilgængelige, når den anden forbliver aktiv. Dette er især vigtigt, hvis du vil installere opdateringer til et live system uden at forstyrre klienters aktiviteter forekomster kan være lukket ned og opgraderet enkeltvis, mens de andre fortsætte online.
- **Vært for programmer i flere datacentre.** Selvom det er meget sandsynligt er det muligt for en hel datacenter til at gå offline via en begivenhed som neutralt nedbrud eller Internet fejl. Vigtig business-programmer skal være placeret i mere end ét datacenter til at levere maksimal tilgængelighed. Dette kan også reducere ventetid for lokale brugere og giver flere muligheder for fleksibilitet, når du opdaterer programmer.
- **Automatisere og teste installation og vedligeholdelse opgaver.** Distribuerede programmer består af flere dele, der skal arbejde sammen. Installation skal derfor være automatiske, ved hjælp af testet og dokumenterede gør som scripts og installationsprogrammer. Disse kan opdatere og validere konfigurationen og automatisere installationsprocessen. Automatiseret teknikker bør også bruges til at foretage opdateringer af hele eller dele af programmer. Det er vigtigt at teste alle disse processer fuldt ud til at sikre, at fejl ikke medfører yderligere nedetid. Alle installationsværktøjer skal have passende sikkerhedsbegrænsninger at beskytte udløst programmet. definere og gennemtvinge politikker for installation omhyggeligt og minimere behovet for mennesker brugerinput.
- **Overvej at bruge test- og funktioner i platformen** hvor disse tjenester er tilgængelige. For eksempel kan med Azure Cloud Services test- og miljøer programmer til at blive skiftet fra en til en anden med det samme via et virtuelt IP-adresse Udskift (VIP Udskift). Hvis du foretrækker at fase lokalt, eller installere forskellige versioner af programmet samtidig og gradvist overførsel af brugere, kan du dog ikke kunne bruge handlingen VIP Udskift.
- **Anvend ændringer i konfigurationen uden genbrug** forekomsten, når det er muligt. I mange situationer kan konfigurationsindstillinger for en Azure-program eller tjeneste ændres uden at kræve rollen skal genstartes. Rolle fremvise hændelser, der kan løses for at registrere ændringer i konfigurationen og anvende dem på komponenter i programmet. Dog kræver nogle ændringer af indstillingerne for core platform en rolle skal genstartes. Når du opbygger komponenter og -tjenester, maksimere tilgængelighed og minimere nedetid ved at designe dem til at acceptere ændringer af indstillinger for søgekonfiguration uden programmet som helhed skal genstartes.
- **Bruge opgradering domæner til nul nedetid ved opdateringer.** Azure beregne enheder som web og arbejder roller er allokeret for at opgradere domæner. Opgradere domæner gruppe rolle forekomster sammen, så, når en rullende opdatering finder sted, hver rolle i opgradering domænet er ikke længere, opdateret og genstartet igen. Derved minimeres påvirkning af programmet tilgængelighed. Du kan angive, hvor mange opgradering domæner skal oprettes til en tjeneste, når tjenesten er installeret.

    > [AZURE.NOTE] Roller distribueres også på tværs af et domæner, hver især er praktisk uafhængigt af andre fejl domæner med hensyn til server rack, power og køling klargøring, for at minimere risikoen for en fejl, som påvirker alle forekomster af rollen. Denne fordeling sker automatisk, og du kan styre den.

- **Konfigurere tilgængeligheden sæt til Azure virtuelle computere.** Med to eller flere virtuelle maskiner i den samme garanterer tilgængelighed sæt, at disse virtuelle maskiner ikke installeres på det samme et domæne. For at maksimere tilgængelighed, skal du oprette flere forekomster af hver kritiske virtuelt bruges af systemet og placere disse forekomster i det samme sæt tilgængelighed. Hvis du kører flere virtuelle maskiner, der har et andet formål, kan du oprette en tilgængelighed, der er angivet for hver virtuelt. Føje forekomster af hver virtuelt til hvert sæt tilgængelighed. Hvis du har oprettet separat virtuelle maskiner skal fungere som en webserver og en reporting server, oprette for eksempel en tilgængelighed, der er angivet for webserveren og en anden tilgængelighed, der er angivet for rapportering serveren. Tilføje forekomster af den web server virtuelle maskine web server tilgængeligheden, og føje forekomster af reporting server virtuel maskine til sættet reporting tilgængelighed.

## <a name="data-management"></a>Datastyring

- **Udnytte data gentagelse** gennem både lokale og geografiske redundans. Dataene i Azure lager replikeres automatisk for at beskytte mod datatab i tilfælde af infrastruktur mislykket, og nogle aspekter af denne replikering kan konfigureres. For eksempel kan skrivebeskyttede kopier af data replikeres i mere end én geografisk område (kaldet læseadgang globalt overflødige lagerplads eller RA-GRS). Bemærk, at ved hjælp af RA-GRS medfører yderligere gebyrer. Yderligere oplysninger finder du [Azure lagerplads priser](https://azure.microsoft.com/pricing/details/storage/).
- **Brug optimistisk på dokumentsammenfald og eventuel konsistens** hvor det er muligt. Transaktioner, Bloker adgang til ressourcer via låsning (pessimistisk på dokumentsammenfald) kan medføre dårlig ydeevne og betydeligt reducere tilgængelighed. Disse problemer kan blive især akutte i distribuerede systemer. I mange situationer minimere omhyggeligt design og teknikker, såsom partitionering risikoen for opdateringer til virkelighed. Når data replikeres, eller der læses fra en separat opdaterede store, vil dataene kun være til sidst ensartet. Men fordelene opveje normalt langt påvirkningen tilgængeligheden af bruger transaktioner for at sikre øjeblikkelig konsistens.
- **Bruge periodiske sikkerhedskopierings- og punkt i gang**, og sikre, at den opfylder de gendannelse Peg målsætning varer. Jævnligt og automatisk sikkerhedskopiere data, der ikke bevares et andet sted, og Bekræft, kan du pålideligt gendanne både dataene og selve programmet skal udføres af en fejl. Replikering af data er ikke en ekstra funktion, fordi fejl og uoverensstemmelser introduceret via fejl, fejl eller skadelige handlinger kan replikeres på tværs af alle butikker. Sikkerhedskopieringen skal være sikker at beskytte data undervejs og i lagerplads. Databaser eller dele af et datalager kan normalt gendannes til et tidligere tidspunkt i gang ved hjælp af transaktionslog. Microsoft Azure indeholder en ekstra funktion til data, der er gemt i Azure SQL-Database. Data, der eksporteres til en ekstra pakke på Azure blob-lager og kan hentes til en sikker lokalt placering til lagring.
- **Aktivere indstillingen høj tilgængelighed til at bevare en sekundær kopi af en Azure Redis cache.** Når du bruger Azure Redis Cache, kan du vælge standard mulighed for at bevare en sekundær kopi af indholdet. Få mere at vide under [oprette en cache i Azure Redis Cache](https://msdn.microsoft.com/library/dn690516.aspx).

## <a name="errors-and-failures"></a>Fejl og fejl

- **Introducere begrebet timeout for en.** Tjenester og ressourcer kan bliver utilgængelige, forårsager anmodninger om at mislykkes. Sikre, at de timeout, du anvender er relevante for hver tjeneste eller ressource samt den klient, der har adgang til dem. (I nogle tilfælde kan det være relevant at tillade en længere timeout for en bestemt forekomst af en klient, afhængigt af konteksten og andre handlinger, der udfører klienten.) Meget kort timeout kan medføre unødvendig forsøg handlinger for tjenester og ressourcer, der har betydelige ventetid. Meget lang timeout kan medføre blokerer Hvis et stort antal anmodninger er sat i kø, venter på en tjeneste eller en ressource til at reagere.
- **Prøv igen mislykkedes handlinger, der er forårsaget af midlertidige fejl.** Designe en strategi for forsøg igen for at få adgang til alle tjenester og ressourcer, hvor de uden videre ikke understøtter automatisk forbindelse prøv igen. Brug en strategi, der indeholder en stigende forsinkelse mellem nye forsøg som antallet af mislykkede forsøg øges, for at forhindre overbelastning på ressourcen, og for at kunne gendanne problemfrit og håndtere anmodninger i kø. Gentaget forsøg med meget korte forsinkelser har sandsynligvis forværre problemet.
- **Stoppe afsendelse af anmodninger om at undgå overlappende fejl** , når remote tjenester, der er ikke tilgængelig. Der kan være situationer, hvor forbigående eller andre fejl, der spænder i alvorlighed fra en delvist tab af forbindelse til den komplette fejl i forbindelse med en tjeneste, tage meget længere tid end forventet at vende tilbage til normal. Desuden, hvis en tjeneste er optaget, kan fejl i den ene del af systemet føre til overlappende fejl og medfører mange handlinger ved at blive blokeret, mens du holder til kritiske systemressourcer som hukommelse, tråde og databaseforbindelser. I stedet for kontinuerligt gentage en handling, der ikke er sandsynlighed for lykkes, bør programmet hurtigt acceptere, handlingen mislykkes, og problemfrit at håndtere fejlen. Du kan bruge afbryder mønstret afvise anmodninger om bestemte handlinger for definerede perioder. Du kan finde flere detaljer, [Afbryder mønster](https://msdn.microsoft.com/library/dn589784.aspx).
- **Opret eller falder tilbage til flere komponenter** til at afhjælpe virkningen af en bestemt tjeneste, der offline eller ikke tilgængelig. Designe programmer for at drage fordel af flere forekomster uden påvirker handlingen og eksisterende forbindelser, hvor det er muligt. Bruge flere forekomster og distribuere anmodninger mellem dem, og registrere og undgå at sende anmodninger til mislykkedes forekomster, for at maksimere tilgængelighed.
- **Design med faldende tilbage til en anden tjeneste eller arbejdsproces** hvor det er muligt. Eksempelvis hvis du skriver til SQL-Database mislykkes, midlertidigt lagre data i blob-lager. Indeholder en funktion til genafspilning skriver i blob-lager til SQL-Database, når tjenesten bliver tilgængelig. I nogle tilfælde kan en mislykket handling har en alternativ handling, der gør det muligt for programmet for at fortsætte med at arbejde, selv når en komponent eller tjeneste mislykkes. Hvis det er muligt at registrere fejl og omdirigere anmodninger om at andre tjenester, der kan tilbyder en passende alternative funktionalitet eller for at sikkerhedskopiere eller reduceret funktionalitet forekomster, der kan vedligeholde kernehandlinger, mens den primære tjeneste er offline.

## <a name="monitoring-and-disaster-recovery"></a>Overvågning og genoprettelse efter nedbrud

- **Angiv omfattende instrumentation til sandsynligvis fejl og mislykkedes hændelser** til at rapportere situationen til handlinger personale. For at finde fejl, der har sandsynligvis, men endnu ikke har opstod, give tilstrækkelige data for at aktivere handlinger personale til at finde årsagen, reducere situationen, og sikre, at systemet tilgængelige. Fejl, der er allerede indtruffet, bør programmet returnere en relevant fejlmeddelelse til brugeren, men forsøger at fortsætte med at køre, selvom med reduceret funktionalitet. I alle tilfælde, overvågning systemet skal tage omfattende detaljer for at gøre det muligt handlinger personale at foretage en hurtig genoprettelse, og hvis det er nødvendigt for designere og udviklere for at ændre systemet for at forhindre situationen i at opstå igen.
- **Overvåge systemtilstand ved at implementere fejlkontrol funktioner.** Sundhed og ydeevnen i et program kan forringe over tid, uden at være synlige, indtil det afbrydes. Implementere sonder, eller se funktioner, der udføres jævnligt fra uden for programmet. Denne kontrol kan være noget så enkelt som måling svartid for programmet som helhed, enkelte dele af programmet, enkelte tjenester, der bruger programmet eller enkelte komponenter. Se funktioner kan udføre processer for at sikre, at de medføre gyldige resultater, måle ventetid og kontrollere tilgængelighed og udtrække oplysninger fra systemet.
- **Jævnligt teste alle failover og fallback-systemer** for at sikre, at de er tilgængelige og fungerer som forventet. Ændringer systemer og handlinger kan påvirke failover og fallback-funktioner, men der registreres muligvis ikke påvirkningen, indtil det primære system mislykkes eller bliver overloadede. Test, før den er nødvendig for kompensation for et live problem på kørselstidspunktet.
- **Teste de overvågning systemer.** Automatiseret failover og fallback-systemer, og manuel visualisering af systemtilstand og ydeevne ved hjælp af dashboards, alle afhænger af overvågning og instrumentation fungerer korrekt. Hvis disse elementer mislykkes, Jeg savner vigtige oplysninger, eller rapportere forkerte data, kan en operator ikke opdager, at systemet er beskadiget eller svigter.
- **Registrere status for længerevarende arbejdsprocesser** , og prøv igen ved fejl. Længerevarende arbejdsprocesser består ofte af flere trin. Sørg for, at hvert trin er uafhængig og kan blive forsøgt igen for at minimere sandsynligheden for at hele arbejdsprocessen skal annulleres, eller, flere kompenserende transaktioner skal udføres. Overvåge og administrere status for længerevarende arbejdsprocesser ved at implementere et mønster som [Scheduler Agent overordnede mønster](https://msdn.microsoft.com/library/dn589780.aspx).
- **Tage højde for nedbrud.** Sørg for en dokumenteret, accepteret og fuldt testet plan for gendannelse fra alle typer fejl, der kan medføre en del af eller alle det primære system er ikke tilgængelig. Test procedurerne regelmæssigt, og sikre, at alle handlinger personale er fortrolig med processen.
